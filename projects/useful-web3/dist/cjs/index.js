"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react/jsx-runtime"),e=require("react");function n(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}u((r=r.apply(t,e||[])).next())}))}function c(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}var u=function(){function t(){this.listeners=new Map}return t.prototype.on=function(t,e){this.listeners.has(t)?this.listeners.get(t).push(e):this.listeners.set(t,[e])},t.prototype.dispatch=function(t,e){this.listeners.has(t)&&this.listeners.get(t).forEach((function(t){return t(e)}))},t}();function a(t,e){if(!t)throw new Error(e)}var h=function(t){return"number"==typeof t?t:parseInt(t,16)},d=function(t){return"0x".concat(t.toString(16))},p=function(t){function e(e){var n=t.call(this)||this;return n.options=e,n}return i(e,t),e.getMetamask=function(t){return Promise.resolve().then((function(){return n(require("@metamask/detect-provider"))})).then((function(e){return(0,e.default)(t)}))},e.prototype.prepareProvider=function(){return s(this,void 0,void 0,(function(){var t,n=this;return c(this,(function(r){switch(r.label){case 0:return[4,e.getMetamask(this.options)];case 1:return(t=r.sent())&&(this.provider=t,this.provider.on("disconnect",(function(){return n.dispatch("disconnect")})),this.provider.on("chainChanged",(function(t){return n.dispatch("update",{chainId:h(t)})})),this.provider.on("accountsChanged",(function(t){return 0===t.length?n.dispatch("disconnect"):n.dispatch("update",{accounts:t})}))),[2]}}))}))},e.prototype.switchChain=function(t){return s(this,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),a(this.provider&&this.provider.request,"Metamask not found"),[4,this.provider.request({method:"wallet_addEthereumChain",params:[t]})];case 1:return n.sent(),[4,this.provider.request({method:"wallet_switchEthereumChain",params:[{chainId:d(t.chainId)}]})];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),this.dispatch("error",e),[3,4];case 4:return[2]}}))}))},e.prototype.connect=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i;return c(this,(function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),this.provider?[3,2]:[4,this.prepareProvider()];case 1:o.sent(),o.label=2;case 2:return a(this.provider&&this.provider.request,"Metamask not found"),[4,Promise.all([this.provider.request({method:"eth_chainId"}),this.provider.request({method:"eth_requestAccounts"})])];case 3:return e=o.sent(),n=e[0],r=e[1],this.dispatch("update",{chainId:h(n),accounts:r}),t?[4,this.switchChain(t)]:[3,5];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:return i=o.sent(),this.dispatch("error",i),[3,7];case 7:return[2]}}))}))},e}(u),l=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n.options=e,n}return i(e,t),e.getWalletConnect=function(t){return Promise.resolve().then((function(){return n(require("@walletconnect/web3-provider"))})).then((function(e){return new(0,e.default)(t)}))},e.prototype.prepareProvider=function(){return s(this,void 0,void 0,(function(){var t,n=this;return c(this,(function(r){switch(r.label){case 0:return[4,e.getWalletConnect(this.options)];case 1:return(t=r.sent())&&(this.provider=t,this.provider.on("disconnect",(function(){return n.dispatch("disconnect")})),this.provider.on("chainChanged",(function(t){return n.dispatch("update",{chainId:h(t)})})),this.provider.on("accountsChanged",(function(t){return 0===t.length?n.dispatch("disconnect"):n.dispatch("update",{accounts:t})}))),[2]}}))}))},e.prototype.switchChain=function(t){return s(this,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),a(this.provider&&this.provider.request,"Metamask not found"),[4,this.provider.request({method:"wallet_switchEthereumChain",params:[{chainId:d(t.chainId)}]})];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),this.dispatch("error",e),[3,3];case 3:return[2]}}))}))},e.prototype.connect=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i;return c(this,(function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),this.provider?[3,2]:[4,this.prepareProvider()];case 1:o.sent(),o.label=2;case 2:return a(this.provider&&this.provider.request,"Metamask not found"),[4,Promise.all([this.provider.request({method:"eth_chainId"}),this.provider.enable()])];case 3:return e=o.sent(),n=e[0],r=e[1],this.dispatch("update",{chainId:h(n),accounts:r}),t?[4,this.switchChain(t)]:[3,5];case 4:o.sent(),o.label=5;case 5:return[3,7];case 6:return i=o.sent(),this.provider=void 0,this.dispatch("error",i),[3,7];case 7:return[2]}}))}))},e.prototype.disconnect=function(){return s(this,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),this.provider?[3,2]:[4,this.prepareProvider()];case 1:e.sent(),e.label=2;case 2:return a(this.provider,"Metamask not found"),[4,this.provider.disconnect()];case 3:return e.sent(),[3,5];case 4:return t=e.sent(),this.dispatch("error",t),[3,5];case 5:return[2]}}))}))},e}(u),f=e.createContext({isLoading:!0,chainId:null,accounts:[],error:null,connector:null,connectWallet:function(){return s(void 0,void 0,void 0,(function(){return c(this,(function(t){return[2]}))}))},switchChain:function(){return s(void 0,void 0,void 0,(function(){return c(this,(function(t){return[2]}))}))},disconnect:function(){return s(void 0,void 0,void 0,(function(){return c(this,(function(t){return[2]}))}))}});exports.Connector=u,exports.MetamaskConnector=p,exports.WalletConnectConnector=l,exports.Web3Context=f,exports.Web3Provider=function(n){var r=n.children,i=n.connector,u=void 0===i?new p:i,a=e.useState(!1),h=a[0],d=a[1],l=e.useState(null),v=l[0],b=l[1],w=e.useState([]),y=w[0],m=w[1],C=e.useState(null),g=C[0],x=C[1],P=function(){b(null),m([]),x(null)};return e.useEffect((function(){u.on("update",(function(t){var e=t.chainId,n=t.accounts;e&&b(e),(null==n?void 0:n.length)&&m(n)})),u.on("error",(function(t){return x(t||new Error(t))})),u.on("disconnect",P)}),[u]),t.jsx(f.Provider,o({value:{isLoading:h,chainId:v,accounts:y,error:g,connector:u,connectWallet:function(t){return s(void 0,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return d(!0),[4,u.connect(t)];case 1:return e.sent(),d(!1),[2]}}))}))},switchChain:function(t){return s(void 0,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return d(!0),[4,u.switchChain(t)];case 1:return e.sent(),d(!1),[2]}}))}))},disconnect:function(){return s(void 0,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return d(!0),u.disconnect?[4,u.disconnect()]:[3,2];case 1:t.sent(),t.label=2;case 2:return P(),d(!1),[2]}}))}))}}},{children:r}))},exports.defaultChainList={},exports.formatChainHex=d,exports.invariant=a,exports.parseChainId=h,exports.useWeb3=function(){return e.useContext(f)};
//# sourceMappingURL=index.js.map
